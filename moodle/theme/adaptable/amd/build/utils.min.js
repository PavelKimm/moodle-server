define(["jquery"],function(a){"use strict";return{init:function(b,c){a(document).ready(function(a){if("coursepage"==b){var d,e,f="sessionStorage"in window&&window.sessionStorage,g=document.location.toString();if(f&&g.indexOf("course/view.php?id=")!=-1){var h=JSON.parse(sessionStorage.getItem("tabValues"))||{},i=JSON.parse(sessionStorage.getItem("tabTimestamp")),j=a("#coursetabcontainer :radio");i?(d=new Date,e=new Date(i),e.setMinutes(e.getMinutes()+parseInt(c)),d.getTime()>e.getTime()&&(console.log("Expired"),sessionStorage.removeItem("tabTimestamp"),sessionStorage.removeItem("tabValues"),h={}),sessionStorage.setItem("tabTimestamp",JSON.stringify(new Date))):(sessionStorage.setItem("tabTimestamp",JSON.stringify(new Date)),console.log("Setting timestamp"));var k=new URL(document.location).searchParams,l=k.get("id");j.on("change",function(){j.each(function(){this.checked&&(h[l]=this.id)}),sessionStorage.setItem("tabValues",JSON.stringify(h))});var m=!1;a.each(h,function(b,c){b==l&&(a("#"+c).prop("checked",!0),m=!0)}),0==m&&a("input:radio[name=tabs]:first").attr("checked",!0),a("label.coursetab").show()}}})}}});